<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SkillSwap — Learn Request</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Onest:wght@300;400;500;600;700&display=swap" rel="stylesheet" />

  <style>
    :root{
      --bg:#9F87C3;
      --glass:rgba(31,27,46,0.72);
      --stroke:rgba(255,255,255,0.16);
      --text:rgba(255,255,255,0.92);
      --muted:rgba(255,255,255,0.72);
      --muted-2:rgba(255,255,255,0.60);
      --shadow:0 20px 60px rgba(0,0,0,0.18);
      --shadow-soft:0 10px 30px rgba(0,0,0,0.12);
      --radius-xl:22px;
      --radius-lg:18px;
      --max:980px;
      --focusRing:0 0 0 3px rgba(255,255,255,0.22), 0 0 0 1px rgba(31,27,46,0.35) inset;
    }
    *{box-sizing:border-box;}
    body{
      margin:0;
      font-family:"Onest",system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      background:var(--bg);
      color:var(--text);
      line-height:1.35;
    }
    html,body{overflow-y:auto;overflow-x:hidden;scrollbar-width:none;-ms-overflow-style:none;}
    body::-webkit-scrollbar{display:none;}
    .wrap{max-width:var(--max);margin:0 auto;padding:18px 18px 56px;}
    .topbar{
      position:sticky;top:0;z-index:30;
      padding:18px 28px;
      background:linear-gradient(to bottom, rgba(159,135,195,0.92), rgba(159,135,195,0.68), rgba(159,135,195,0));
      backdrop-filter:blur(10px);
    }
    @media(max-width:720px){.topbar{padding:16px 16px;}}
    .header{display:flex;align-items:center;justify-content:space-between;gap:12px;}
    .brandName{font-weight:700;letter-spacing:0.14em;font-size:0.95rem;user-select:none;}
    .btn{
      appearance:none;border:1px solid rgba(255,255,255,0.18);
      background:rgba(255,255,255,0.12);color:var(--text);
      border-radius:14px;padding:10px 12px;cursor:pointer;
      transition:transform 140ms ease, background 140ms ease;
      font-weight:600;letter-spacing:0.2px;text-decoration:none;
      display:inline-flex;align-items:center;justify-content:center;gap:10px;
      white-space:nowrap;
    }
    .btn:hover{transform:translateY(-1px);background:rgba(255,255,255,0.14);text-decoration:none;}
    .btn:active{transform:translateY(0);}
    .btn:focus-visible{outline:none;box-shadow:var(--focusRing);}
    .btn.primary{background:rgba(255,255,255,0.18);border-color:rgba(255,255,255,0.22);}
    .btn.ghost{background:rgba(255,255,255,0.08);border-color:rgba(255,255,255,0.14);}

    .card{border-radius:var(--radius-xl);background:var(--glass);border:1px solid var(--stroke);box-shadow:var(--shadow-soft);overflow:hidden;}
    .cardHeader{padding:14px 16px;border-bottom:1px solid rgba(255,255,255,0.10);display:flex;align-items:flex-start;justify-content:space-between;gap:12px;}
    .cardHeader .h{margin:0;font-weight:650;letter-spacing:0.2px;font-size:1.02rem;}
    .cardBody{padding:14px 16px 16px;}
    .muted2{color:var(--muted-2);}

    label{display:block;font-size:0.90rem;color:var(--muted);margin-bottom:6px;}
    input,textarea,select{
      width:100%;
      border-radius:14px;border:1px solid rgba(255,255,255,0.14);
      background:rgba(255,255,255,0.10);color:var(--text);
      padding:10px 12px;outline:none;
      transition:box-shadow 140ms ease, border-color 140ms ease, background 140ms ease;
      font:inherit;
    }
    textarea{resize:vertical;min-height:110px;}
    input:focus,textarea:focus,select:focus{box-shadow:var(--focusRing);border-color:rgba(255,255,255,0.24);background:rgba(255,255,255,0.12);}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-top:14px;}
    @media(max-width:920px){.grid{grid-template-columns:1fr;}}
    .note{border-radius:var(--radius-lg);border:1px solid rgba(255,255,255,0.12);background:rgba(255,255,255,0.06);padding:12px;color:rgba(255,255,255,0.90);font-size:0.92rem;}
    .hr{height:1px;background:rgba(255,255,255,0.10);margin:12px 0;}
    .item{border-radius:var(--radius-lg);border:1px solid rgba(255,255,255,0.12);background:rgba(255,255,255,0.06);padding:12px;display:flex;justify-content:space-between;gap:10px;align-items:flex-start;}
    .title{font-weight:650;letter-spacing:0.2px;}
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:0.92rem;color:rgba(255,255,255,0.86);}
  </style>
</head>

<body>
  <div class="topbar">
    <div class="header">
      <div class="brandName">SKILLSWAP</div>
      <div style="display:flex; gap:10px; align-items:center;">
        <a class="btn ghost" href="home.html">Back to Home</a>
      </div>
    </div>
  </div>

  <main class="wrap">
    <section class="card">
      <div class="cardHeader">
        <div>
          <h1 class="h" style="font-size:1.18rem;">Learn: request a session</h1>
          <div class="muted2" style="font-size:0.92rem;">Post what you want to learn. A teacher can accept it.</div>
        </div>
        <a class="btn ghost" href="teach-session.html">Go to Teach inbox</a>
      </div>

      <div class="cardBody">
        <form id="learnForm" style="display:grid; gap:12px;">
          <div>
            <label for="skill">Skill / topic</label>
            <input id="skill" name="skill" placeholder="e.g., React charts, Figma components, SQL joins" required />
          </div>

          <div class="grid" style="margin-top:0;">
            <div>
              <label for="level">Level</label>
              <select id="level" name="level">
                <option value="beginner">Beginner</option>
                <option value="intermediate" selected>Intermediate</option>
                <option value="advanced">Advanced</option>
              </select>
            </div>

            <div>
              <label for="duration">Duration</label>
              <select id="duration" name="duration">
                <option value="30">30 min</option>
                <option value="45" selected>45 min</option>
                <option value="60">60 min</option>
              </select>
            </div>
          </div>

          <div>
            <label for="note">What do you need help with?</label>
            <textarea id="note" name="note" placeholder="1–3 lines. Be specific." required></textarea>
          </div>

          <div style="display:flex; gap:10px; flex-wrap:wrap;">
            <button class="btn primary" type="submit">Post request</button>
            <button class="btn ghost" id="clearBtn" type="button">Clear</button>
          </div>

          <div class="note">
            MVP: request is stored locally and appears in Teach inbox. Matching is mocked. [file:61]
          </div>
        </form>
      </div>
    </section>

    <section class="card" style="margin-top:14px;">
      <div class="cardHeader">
        <h2 class="h">Your latest request</h2>
        <button class="btn ghost" id="wipeBtn" type="button">Wipe all (dev)</button>
      </div>
      <div class="cardBody" id="latestBox">
        <div class="muted2">No requests yet.</div>
      </div>
    </section>
  </main>

  <script>
    const KEY_REQS = 'ss_learn_requests';

    function nowStamp(){
      const d = new Date();
      const pad2 = (x) => String(x).padStart(2,'0');
      return `${d.getFullYear()}-${pad2(d.getMonth()+1)}-${pad2(d.getDate())} ${pad2(d.getHours())}:${pad2(d.getMinutes())}`;
    }

    function loadReqs(){
      const raw = localStorage.getItem(KEY_REQS);
      if (!raw) return [];
      try{
        const arr = JSON.parse(raw); // arrays stored via JSON [web:322]
        return Array.isArray(arr) ? arr : [];
      }catch(e){ return []; }
    }

    function saveReqs(arr){
      localStorage.setItem(KEY_REQS, JSON.stringify(arr)); // store arrays via JSON [web:322]
    }

    function newId(){
      return 'L' + Date.now().toString(36).toUpperCase();
    }

    function renderLatest(){
      const box = document.getElementById('latestBox');
      const reqs = loadReqs();
      const last = reqs[reqs.length - 1];
      if (!last){
        box.innerHTML = `<div class="muted2">No requests yet.</div>`;
        return;
      }
      box.innerHTML = `
        <div class="item">
          <div>
            <div class="title">${last.skill}</div>
            <div class="muted2" style="margin-top:6px;">Level: ${last.level} • Duration: ${last.duration} min</div>
            <div class="muted2" style="margin-top:8px;">${last.note}</div>
            <div class="muted2" style="margin-top:10px;">Status: <span class="mono">${last.status}</span></div>
          </div>
          <div class="mono">${last.id}</div>
        </div>
        <div class="hr"></div>
        <div class="muted2" style="font-size:0.92rem;">Created: ${last.createdAt}</div>
      `;
    }

    const form = document.getElementById('learnForm');
    const clearBtn = document.getElementById('clearBtn');
    const wipeBtn = document.getElementById('wipeBtn');

    form.addEventListener('submit', (e) => {
      e.preventDefault(); // stop default submit navigation [web:324]
      const skill = document.getElementById('skill').value.trim();
      const level = document.getElementById('level').value;
      const duration = document.getElementById('duration').value;
      const note = document.getElementById('note').value.trim();

      const req = {
        id: newId(),
        createdAt: nowStamp(),
        skill,
        level,
        duration,
        note,
        status: 'pending' // pending -> accepted -> completed
      };

      const reqs = loadReqs();
      reqs.push(req);
      saveReqs(reqs);

      alert('Request posted (mock). Now open Teach inbox to accept it.');
      renderLatest();
    });

    clearBtn.addEventListener('click', () => {
      document.getElementById('skill').value = '';
      document.getElementById('note').value = '';
      document.getElementById('level').value = 'intermediate';
      document.getElementById('duration').value = '45';
    });

    wipeBtn.addEventListener('click', () => {
      localStorage.removeItem(KEY_REQS);
      renderLatest();
      alert('All learn requests wiped (dev).');
    });

    renderLatest();
    
  </script>
</body>
</html>
